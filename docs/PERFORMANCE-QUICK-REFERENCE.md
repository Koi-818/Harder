# 性能指标快速参考

## 📊 指标速查表

### 基础统计
| 指标 | 含义 | 单位 | 优化目标 |
|------|------|------|---------|
| 总请求数 | 页面加载期间的 HTTP 请求总数 | 个 | < 100 |
| 成功请求 | HTTP 2xx 状态码的请求 | 个 | 越高越好 |
| 失败请求 | HTTP 4xx/5xx 状态码的请求 | 个 | 0 |
| 成功率 | 成功请求 / 总请求数 | % | > 95% |

### 性能时间
| 指标 | 含义 | 单位 | 优化目标 |
|------|------|------|---------|
| 总加载时间 | 从开始到完成的总耗时 | 秒 | < 3 |
| 平均响应时间 | 总加载时间 / 总请求数 | 秒 | < 0.1 |
| 等待时间 | 等待服务器首字节的时间(TTFB) | 秒 | < 1 |
| 接收时间 | 下载响应内容的总时间 | 秒 | 越短越好 |

### 数据流量
| 指标 | 含义 | 单位 | 优化目标 |
|------|------|------|---------|
| 总数据量 | 所有响应内容的总大小 | MB | < 3 |
| 平均请求大小 | 总数据量 / 总请求数 | KB | < 100 |

### 资源分布
| 资源类型 | 含义 | 优化建议 |
|---------|------|--------|
| HTML | 网页文档 | 保持精简 |
| CSS | 样式表 | 压缩和合并 |
| JS | JavaScript | 代码分割和懒加载 |
| IMAGE | 图片资源 | 优化格式和大小 |
| FONT | 字体资源 | 使用系统字体或异步加载 |
| VIDEO | 视频资源 | 使用视频流媒体 |
| OTHER | 其他资源 | 按类型优化 |

---

## 🎯 性能评级

### 非常好 ✅
- 总加载时间 < 2 秒
- 成功率 > 99%
- 总数据量 < 1 MB
- 平均响应时间 < 0.05 秒

### 良好 ✓
- 总加载时间 2-3 秒
- 成功率 95-99%
- 总数据量 1-3 MB
- 平均响应时间 0.05-0.1 秒

### 一般 △
- 总加载时间 3-5 秒
- 成功率 90-95%
- 总数据量 3-5 MB
- 平均响应时间 0.1-0.2 秒

### 需要优化 ⚠
- 总加载时间 > 5 秒
- 成功率 < 90%
- 总数据量 > 5 MB
- 平均响应时间 > 0.2 秒

---

## 🔍 常见问题诊断

### 问题 1: 加载速度慢

**检查指标**
- 总加载时间？
- 等待时间（TTFB）？
- 哪些资源最慢？

**可能原因**
- [ ] 服务器响应慢（TTFB 高）
- [ ] 单个大文件（检查"最大的资源"）
- [ ] 过多小请求（总请求数高）

**优化方案**
```
① 使用 CDN 加速
② 启用 Gzip 压缩
③ 对图片进行优化
④ 合并 CSS 和 JS 文件
```

### 问题 2: 请求失败

**检查指标**
- 失败请求数？
- 失败状态码？
- 哪些资源失败？

**可能原因**
- [ ] 资源 404 Not Found
- [ ] 跨域问题 CORS
- [ ] 权限不足 403
- [ ] 服务器错误 5xx

**优化方案**
```
① 检查资源路径
② 配置 CORS 头
③ 检查权限设置
④ 修复后端错误
```

### 问题 3: 数据量过大

**检查指标**
- 总数据量？
- 最大的资源？
- 资源类型分布？

**可能原因**
- [ ] 图片未压缩
- [ ] JavaScript 代码未压缩
- [ ] 样式表未压缩
- [ ] 资源重复加载

**优化方案**
```
① 优化图片格式 (WebP, AVIF)
② 启用资源压缩 (gzip, brotli)
③ 代码分割和按需加载
④ 使用构建工具打包
```

### 问题 4: 成功率低

**检查指标**
- 成功率？
- 失败请求数？
- 失败的状态码？

**可能原因**
- [ ] 网络连接不稳定
- [ ] 后端服务问题
- [ ] 资源配置错误
- [ ] 请求超时

**优化方案**
```
① 增加重试机制
② 检查后端服务健康状况
③ 优化请求超时设置
④ 使用请求重试库
```

---

## 💡 优化建议

### 快速优化

**优先级 1 - 影响最大**
1. [ ] 压缩大文件资源
2. [ ] 启用 Gzip 压缩
3. [ ] 使用 CDN 加速
4. [ ] 优化图片格式

**优先级 2 - 中等影响**
5. [ ] 合并小文件
6. [ ] 异步加载脚本
7. [ ] 延迟加载图片
8. [ ] 使用缓存

**优先级 3 - 细节优化**
9. [ ] 删除不必要的资源
10. [ ] 优化 CSS 选择器
11. [ ] 减少 DOM 重排
12. [ ] 使用 HTTP/2

### 对比测试

**创建基准线**
```bash
# 第一次录制（基准）
npm start
# 保存 HAR 文件
cp hars/recording-xxx.har baseline.har
```

**性能对比**
```bash
# 优化后再次录制
npm start
# 对比两个 HAR 文件的指标
```

### 持续监控

建议每周运行一次性能测试，监控以下指标：
- 总加载时间趋势
- 成功率稳定性
- 资源大小变化
- 请求数趋势

---

## 📞 更多帮助

- 查看详细说明：`docs/PERFORMANCE-METRICS.md`
- 查看使用指南：`docs/QUICK-START.md`
- 查看更新日志：`docs/CHANGELOG.md`
- 查看项目文档：`README.md`
